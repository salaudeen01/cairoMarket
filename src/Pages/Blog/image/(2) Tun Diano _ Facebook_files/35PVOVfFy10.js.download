if (self.CavalryLogger) { CavalryLogger.start_js(["ONO4T"]); }

__d("useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim.graphql",[],function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim",selections:[{alias:null,args:null,concreteType:"FXIMQueries",kind:"LinkedField",name:"fx_identity_management",plural:!1,selections:[{alias:null,args:null,concreteType:"FXIMIdentityManagementScreenResources",kind:"LinkedField",name:"screen_resources",plural:!1,selections:[{alias:null,args:null,concreteType:"FXIMIdentityManagementScreenResourcesRemindersChangePhoto",kind:"LinkedField",name:"reminders_change_photo",plural:!1,selections:[{documentName:"useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim",fragmentName:"FXIMCometProfilePhotoSyncReminderDialog_reminders_change_photo",fragmentPropName:"reminders_change_photo",kind:"ModuleImport"}],storageKey:null}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null};e.exports=a},null);
__d("FXIMCometProfilePhotoSyncPassiveReminder_textWithEntities.graphql",[],function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FXIMCometProfilePhotoSyncPassiveReminder_textWithEntities",selections:[{args:null,kind:"FragmentSpread",name:"CometTextWithEntitiesRelay_textWithEntities"}],type:"TextWithEntities",abstractKey:null};e.exports=a},null);
__d("fximCometProfilePhotoSyncPassiveReminder_query.graphql",[],function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"fximCometProfilePhotoSyncPassiveReminder_query"};e.exports=a},null);
__d("ProfileCometProfilePictureMediaPickerPhoto_media.graphql",[],function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"Variable",name:"scale",variableName:"scale"},b={alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null};return{argumentDefinitions:[{kind:"RootArgument",name:"scale"}],kind:"Fragment",metadata:null,name:"ProfileCometProfilePictureMediaPickerPhoto_media",selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"accessibility_caption",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:[a],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},b,{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:null},{alias:"thumbnail_image",args:[a,{kind:"Literal",name:"sizing",value:"cover-fill-cropped"},{kind:"Literal",name:"width",value:105}],concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[b],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_profile_picture",storageKey:null}],type:"Photo",abstractKey:null}],type:"Media",abstractKey:"__isMedia"}}();e.exports=a},null);
__d("FXIMLoggerReminderReferral",["$InternalEnum"],function(a,b,c,d,e,f){a=b("$InternalEnum")({EDIT_PROFILE:"edit_profile",LONG_PRESS_PROFILE:"long_press_profile",OTHER:"other"});c=a;e.exports=c},null);
__d("ProfilePhotoSource",[],function(a,b,c,d,e,f){a=Object.freeze({FEED:"feed",TIMELINE:"timeline",NUX:"nux",NUX_PROFILE_PIC_QP:"nux_profile_pic_qp",WELCOME:"welcome",PHOTO_VIEW:"photo_view",SUGGESTIONS:"suggestions",MEGAPHONE_ACTIVATION:"megaphone_activation",MESSENGER_ONLY_ACCOUNT_CREATION:"messenger_only_account_creation",PROMO_LANDING:"promo_landing",CELEBRATE_PRIDE:"celebrate_pride",EXPIRING:"expiring",UNKNOWN:"unknown",VERTEX_RESIDENCE:"vertex_residence",MISSIONS:"missions",ATWORK_NUX:"atwork_nux",ATWORK_MEGAPHONE:"atwork_megaphone",ATWORK_SIGNUP:"atwork_signup",ATWORK_SIGNUP_FROM_FACEBOOK:"atwork_signup_from_facebook",ATWORK_PROFILE_NUX:"atwork_profile_nux",FAMILY_MEMBER:"family_member",FUNDRAISER:"fundraiser",INFO_REQUEST_FULFILL:"info_request_fulfill",PROFILE_VIDEO:"profile_video",HEISMAN_CTA:"heisman_cta",HEISMAN_LANDING_PAGE:"heisman_landing_page",IORG:"internet_org",BOOKMARK:"bookmark",LEGACY_CONTACT:"legacy_contact",SLIDESHOW_PAGES_COMPOSER:"slideshow_pages_composer",WATERMARK:"watermark",PAGE_CREATION:"page_creation",ROOM_PROFILE:"room_profile",SHOWS_ACTION_ITEM:"shows_action_item",SHOW_CREATION:"show_creation",STALE_PROFILE_PICTURE_CTA:"stale_profile_pic_cta",REGISTRATION:"registration",GEMSTONE_ONBOARD:"gemstone_onboard",GEMSTONE_EDIT_PROFILE:"gemstone_edit_profile",PAGES_VIDEO_LIBRARY_VCK:"pages_video_library_vck",KOTOTORO_USER_PROFILE:"kototoro_user_profile",FRAME_ME_BOT:"wp_frame_me_bot",AVATARS:"avatars",PAGE_ADMIN_EDITING:"page_admin_editing",WORKPLACE_ADMIN_PANEL:"workplace_admin_panel"});e.exports=a},null);
__d("fximCometReminderReferralFromProfilePhotoSource",["FXIMLoggerReminderReferral","ProfilePhotoSource"],function(a,b,c,d,e,f){"use strict";f.fximCometReminderReferralFromProfilePhotoSource=a;function a(a){switch(a){case"timeline":return"edit_profile";default:return"other"}}},null);
__d("useFXIMCometProfilePhotoSyncReminderOnSaveHandler",["Promise","CometRelay","React","fximCometReminderReferralFromProfilePhotoSource","requireDeferred","useCometDeferredDialog","useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim.graphql"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i=b("requireDeferred")("FXIMCometProfilePhotoSyncReminderNullDialog.react");function a(a){var c=a.fragment,d=a.source;a=b("CometRelay").useFragment(g!==void 0?g:g=b("useFXIMCometProfilePhotoSyncReminderOnSaveHandler_fxim.graphql"),c);c=a.fx_identity_management;var e=c==null?void 0:(a=c.screen_resources)==null?void 0:a.reminders_change_photo;c=e!=null?b("CometRelay").ModuleResource.read(e):null;c=b("useCometDeferredDialog")((a=c)!=null?a:i);var f=c[0];a=h.useCallback(function(){return new(b("Promise"))(function(a){if(e){var c=b("fximCometReminderReferralFromProfilePhotoSource").fximCometReminderReferralFromProfilePhotoSource(d);f({fragment:e,loggerReminderReferral:c},a)}else a(!0)})},[e,f,d]);return a}},null);
__d("FXIMCometProfilePhotoSyncPassiveReminder.react",["CometBoldedEntityRenderer","CometRelay","CometTextWithEntitiesRelay.react","FXIMRemindersLogger","React","fximCometReminderReferralFromProfilePhotoSource","FXIMCometProfilePhotoSyncPassiveReminder_textWithEntities.graphql"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a){var c=a.source;a=a.textWithEntities;a=b("CometRelay").useFragment(g!==void 0?g:g=b("FXIMCometProfilePhotoSyncPassiveReminder_textWithEntities.graphql"),a);h.useEffect(function(){var a=b("fximCometReminderReferralFromProfilePhotoSource").fximCometReminderReferralFromProfilePhotoSource(c);b("FXIMRemindersLogger").fximRemindersLogShown("edit_photo_reminder",a)},[c]);return h.jsx(b("CometTextWithEntitiesRelay.react"),{renderers:{"*":[b("CometBoldedEntityRenderer")]},textWithEntities:a})}},null);
__d("fximCometProfilePhotoSyncPassiveReminder",["CometRelay","FXIMCometProfilePhotoSyncPassiveReminder.react","React","fximCometProfilePhotoSyncPassiveReminder_query.graphql"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React");function a(a,c){a=b("CometRelay").readInlineData(g!==void 0?g:g=b("fximCometProfilePhotoSyncPassiveReminder_query.graphql"),a);a=(a=a.fx_identity_management)==null?void 0:(a=a.screen_resources)==null?void 0:a.profile_picture_alt_disclaimer;return a==null?null:h.jsx(b("FXIMCometProfilePhotoSyncPassiveReminder.react"),{source:c,textWithEntities:a})}},null);
__d("ProfileCometProfilePictureTemporaryOptions",[],function(a,b,c,d,e,f){"use strict";a=Object.freeze({CUSTOM:-2,DAY:86400,HOUR:3600,MONTH:2592e3,PERMANENT:-1,WEEK:604800});e.exports=a},null);
__d("ProfileCometExpirationTimeSelector.react",["fbt","CometCardedDialogLoadingState.react","CometSelect.react","CometTimestamp.react","JSResourceForInteraction","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureTemporaryOptions","React","useCometLazyDialog","useServerTime"],function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React"),i=b("JSResourceForInteraction")("ProfileCometExpirationTimeSelectorDialog.react").__setRef("ProfileCometExpirationTimeSelector.react"),j=[{label:(c=b("ProfileCometProfilePictureEditStrings")).TEMPORARY_OPTION_ONE_HOUR,value:(d=b("ProfileCometProfilePictureTemporaryOptions")).HOUR},{label:c.TEMPORARY_OPTION_ONE_DAY,value:d.DAY},{label:c.TEMPORARY_OPTION_ONE_WEEK,value:d.WEEK},{label:c.TEMPORARY_OPTION_ONE_MONTH,value:d.MONTH},{label:c.TEMPORARY_OPTION_NEVER,value:d.PERMANENT},{label:c.TEMPORARY_OPTION_CUSTOM,value:d.CUSTOM}],k=function(){return h.jsx(b("CometCardedDialogLoadingState.react"),{title:g._("Switch back to previous profile picture at")})};function a(a){var c=a.disabled;c=c===void 0?!1:c;var d=a.onChange;a=a.value;a=h.useState((a=a)!=null?a:b("ProfileCometProfilePictureTemporaryOptions").PERMANENT);var e=a[0],f=a[1];a=h.useState(null);var g=a[0],l=a[1];a=b("useServerTime")();a=b("CometTimestamp.react").getTimestamp(a,new Date((a=g)!=null?a:0));a=[g!=null?{label:a,value:g}:null].concat(j).filter(Boolean);var m=b("useCometLazyDialog")(i,k),n=m[0];h.useEffect(function(){g!=null?d(Math.ceil((g-Date.now())/1e3)):e===b("ProfileCometProfilePictureTemporaryOptions").PERMANENT?d(null):d(e)},[g,e,d]);return h.jsx(b("CometSelect.react"),{disabled:c,onChange:function(a){a===b("ProfileCometProfilePictureTemporaryOptions").CUSTOM?n({onSelect:function(a){return l(a.getTime())}}):(f(a),l(null))},options:a,selectedValue:(m=g)!=null?m:e,size:"full"})}},null);
__d("ProfileCometProfilePictureEditDialogReducer",[],function(a,b,c,d,e,f){"use strict";f.getInitialState=a;f.reducer=b;function a(){return{image:null,isUploading:!1,step:"PICKER"}}function b(a,b){switch(b.type){case"ADD_FRAME":return babelHelpers["extends"]({},a,{step:"FRAME"});case"SELECT_PHOTO":return babelHelpers["extends"]({},a,{image:b.image,step:"PREVIEW"});case"PREVIEW_CANCEL":return babelHelpers["extends"]({},a,{image:null,step:"PICKER"});case"REMOVE_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"REMOVE_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"REMOVE_SUCCESS":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_FAILED":return babelHelpers["extends"]({},a,{isUploading:!1});case"UPLOAD_STARTED":return babelHelpers["extends"]({},a,{isUploading:!0});case"UPLOAD_SUCCESS":return babelHelpers["extends"]({},a,{image:babelHelpers["extends"]({},b.image,{isUploaded:!0}),isUploading:!1,step:a.step==="FRAME"?a.step:"PREVIEW"});case"UPDATE_THUMBNAIL":return babelHelpers["extends"]({},a,{image:b.image,step:"THUMBNAIL"});default:return babelHelpers["extends"]({},a)}}},null);
__d("ProfileCometProfilePictureEditDialogContext",["ProfileCometProfilePictureEditDialogReducer","React","emptyFunction"],function(a,b,c,d,e,f){"use strict";a=b("React");c=a.createContext({dispatch:b("emptyFunction"),loadEntryPoint:void 0,state:b("ProfileCometProfilePictureEditDialogReducer").getInitialState()});e.exports=c},null);
__d("ProfileCometProfilePictureZoomCropImage.react",["ix","CometImage.react","ProfileCometProfilePictureEditStrings","React","TetraIcon.react","TetraText.react","clamp","fbicon","stylex","useGlobalEventListener"],function(a,b,c,d,e,f,g){"use strict";e.exports=a;var h=b("React");function i(a,b,c){var d=(.5-a[0])*b[0]*c;a=(.5-a[1])*b[1]*c;return{transform:"translate3d("+d+"px, "+a+"px, 0) scale("+c+")"}}function j(a){switch(a){case"circle":return{WebkitMaskImage:"-webkit-radial-gradient(white, black)",borderRadius:"50%"};case"rect":default:return{}}}function k(a){return{height:a[1]+"px",width:a[0]+"px"}}function l(a,b){var c=-(b[0]-a[0])/2;b=-(b[1]-a[1])/2;return{transform:"translate("+c+"px, "+b+"px)"}}function m(a,c,d,e){var f=c[0]/2/(d[0]*e);c=c[1]/2/(d[1]*e);return[b("clamp")(a[0],f,1-f),b("clamp")(a[1],c,1-c)]}function a(a){var c=a.center,d=a.cropShape;d=d===void 0?"circle":d;var e=a.cropSize,f=a.disabled,n=f===void 0?!1:f,o=a.imageSize;f=a.imageSrc;var p=a.onMove,q=a.showCropped;q=q===void 0?!1:q;a=a.zoom;var r=a===void 0?1:a,s=h.useRef([0,0]),t=h.useRef([0,0]),u=h.useRef(1);a=h.useState(!1);var v=a[0],w=a[1];a=h.useState(!0);var x=a[0],y=a[1];a=h.useCallback(function(a){a.preventDefault()},[]);var z=h.useCallback(function(a){if(n)return;w(!0);y(!1);s.current=[a.clientX,a.clientY];t.current=c},[c,n]),A=h.useCallback(function(a){w(!1),a.stopPropagation()},[]),B=h.useCallback(function(a){if(!v)return;var b=a.clientX-s.current[0];a=a.clientY-s.current[1];b=[t.current[0]-b/(o[0]*u.current),t.current[1]-a/(o[1]*u.current)];p(m(b,e,o,u.current))},[e,o,v,p]);h.useEffect(function(){r!==u.current&&(u.current=r,p(m(c,e,o,r)))},[c,e,o,p,r]);b("useGlobalEventListener")("mousemove",v?B:null,{capture:!0});b("useGlobalEventListener")("mouseup",v?A:null,{capture:!0});return h.jsxs("div",{className:"k4urcfbm l9j0dhe7 stjgntxs ni8dbmo4 datstx6m",children:[h.jsxs("div",{className:"ke6wolob rk01pc8j l9j0dhe7 f9o22wc5 ad2k81qe"+(q?" stjgntxs ni8dbmo4":""),style:k(e),children:[h.jsx("div",{className:"l9j0dhe7 stjgntxs ni8dbmo4",style:babelHelpers["extends"]({},j(d),k(e)),children:h.jsx("div",{className:"pmk7jnqg soycq5t1",style:l(e,o),children:h.jsx("div",{style:i(c,o,u.current),children:h.jsx(b("CometImage.react"),{src:f})})})}),h.jsx("div",{className:"kr520xx4 pmk7jnqg akz8cqyu soycq5t1",style:l(e,o),children:h.jsx("div",{className:n?"":"a7woen2v",onDragStart:a,onMouseDown:z,style:i(c,o,u.current),children:h.jsx(b("CometImage.react"),{src:f})})})]}),!n&&x&&h.jsxs("div",{className:"cj5g2342 adce92kx kfkz5moi pmk7jnqg cxgpxx05 tw6a2znq d1544ag0 sj5x9vvc j83agx80 l82x9zwi uo3d90p7 pw54ja7n ue3kfks5 ora8z2hr bp9cbjyn",children:[h.jsx("div",{className:"oi9244e8 j83agx80",children:h.jsx(b("TetraIcon.react"),{color:"white",icon:b("fbicon")._(g("697185"),20)})}),h.jsx(b("TetraText.react"),{color:"white",type:"headlineEmphasized4",children:b("ProfileCometProfilePictureEditStrings").DRAG_INSTRUCTIONS})]})]})}},null);
__d("ProfileCometProfilePictureZoomCrop.react",["ProfileCometProfilePictureZoomControl.react","ProfileCometProfilePictureZoomCropImage.react","React","clamp","stylex"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=b("React"),i={"default":{height:"cmsa8f9s",width:"f36cnskx"}},j=5,k=180;function l(a){return Number(a.toFixed(j))}function m(a,b){b=Math.max(a[0]/b[0],a[1]/b[1]);a=Math.max(Math.min(a[0]/k,a[1]/k),b);return[l(b),l(a)]}function n(a){return a[0]/a[1]===1}function a(a){var c=a.cropShape;c=c===void 0?"circle":c;var d=a.cropSize,e=a.disabled;e=e===void 0?!1:e;var f=a.imageSize,j=a.imageSrc,k=a.onChange,o=a.showCropped;o=o===void 0?!1:o;a=a.xstyle;var p=m(d,f),q=h.useState(p[0]),r=q[0],s=q[1];q=h.useState([.5,.5]);var t=q[0],u=q[1];q=!(r===p[0]&&n(f));var v=h.useCallback(function(a){u(a)},[]),w=h.useCallback(function(a){s(a)},[]);h.useEffect(function(){var a,c=d[1]/(f[1]*r),e=d[0]/(f[0]*r),g=t[0]-e/2,h=t[1]-c/2;c=l((a=b("clamp"))(c,0,1));e=l(a(e,0,1));k({height:c,width:e,x:l(a(g,0,1-e)),y:l(a(h,0,1-c))})},[t,d,f,k,r]);return h.jsxs("div",{children:[h.jsx("div",{className:(g||(g=b("stylex")))((a=a)!=null?a:i["default"]),children:h.jsx(b("ProfileCometProfilePictureZoomCropImage.react"),{center:t,cropShape:c,cropSize:d,disabled:e||!q,imageSize:f,imageSrc:j,onMove:v,showCropped:o,zoom:r})}),h.jsx(b("ProfileCometProfilePictureZoomControl.react"),{disabled:e,max:p[1],min:p[0],onChange:w,step:.1,value:r})]})}},null);
__d("ProfileCometProfilePictureEditPreview.react",["ix","fbt","Promise","BaseRow.react","BaseRowItem.react","CometCard.react","CometFormTextArea.react","CometProgressIndicator.react","CometRelay","ProfileCometContextualProfileContext","ProfileCometExpirationTimeSelector.react","ProfileCometProfilePictureEditStrings","ProfileCometProfilePictureSetMutation","ProfileCometProfilePictureTemporaryOptions","ProfileCometProfilePictureZoomCrop.react","React","TetraButton.react","TetraIcon.react","TetraText.react","fbicon","gkx","logCometFunnelEvent","promiseDone","stylex","useIsMountedRef","useProfileEngagementClickCallback","useProfileEngagementImpression"],function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=b("React"),k={cancelButton:{marginEnd:"cgat1ltu"},cropPhotoButton:{marginEnd:"tvfksri0"},description:{paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},footerWithDivider:{alignItems:"bp9cbjyn",borderTop:"l6v480f0",display:"j83agx80",justifyContent:"bkfpd7mw",paddingTop:"discj3wi",paddingEnd:"hv4rvrfc",paddingBottom:"ihqw7lf3",paddingStart:"dati1w0a"},privacyDisclaimer:{alignItems:"bp9cbjyn",display:"j83agx80",marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},privacyIcon:{display:"j83agx80",marginEnd:"tvfksri0"},privacyText:{display:"j83agx80"},saveButton:{marginStart:"kkf49tns"},savingIndicator:{marginEnd:"cgat1ltu"},spacingBottom:{marginBottom:"sjgh65i0",marginEnd:"wkznzc2l",marginStart:"dhix69tm"},temporaryInput:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"i1fnvgqd",paddingBottom:"f10w8fjw",paddingEnd:"hv4rvrfc",paddingStart:"dati1w0a",paddingTop:"pybr56ya"}},l=300;function a(a){var c=a.showPrivacyDisclaimerGlobe;c=c===void 0?!0:c;var d=a.privacyDisclaimer,e=a.canCropPhoto;e=e===void 0?!1:e;var f=a.canMakeTemporary;f=f===void 0?!1:f;var m=a.onCancel,n=a.onSave,o=n===void 0?function(){return b("Promise").resolve(!0)}:n,p=a.onSaveSuccess,q=a.photo,r=a.profileID,s=a.source,t=a.targetType;n=a.xstyle;var u=b("CometRelay").useRelayEnvironment(),v=j.useRef(null);a=j.useState("");var w=a[0],x=a[1],y=b("useIsMountedRef")();a=j.useState(!1);var z=a[0],A=a[1];a=j.useContext(b("ProfileCometContextualProfileContext"));var B=a.isContextualProfileView;a=a.userID;var C=j.useState(!1),D=C[0],E=C[1];C=j.useState(!1);var F=C[0],G=C[1];C=j.useState(b("ProfileCometProfilePictureTemporaryOptions").WEEK);var H=C[0];C=C[1];var I=e&&b("gkx")("1801679");e={engagement_type:"click",event_metadata:{entry_point:"self-view_edit_profile",item_edited:"profile_picture",type:"profile_picture"},item_subtype:"save_button",item_type:"edit_page",product_bucket:"contextual_profile",profile_id_dummy:a,subsurface:"group_contextual_profile_edit_page",surface:"group_contextual_profile"};var J=b("useProfileEngagementClickCallback")(e),K=j.useCallback(function(){A(!0),B&&J(),b("ProfileCometProfilePictureSetMutation").setProfilePicture(u,{caption:w,expirationTime:F?H:null,photoID:q.id,profileID:r,scaledCropRect:v.current||void 0,skipCropping:I?!D:!1,source:s||void 0,targetType:t},{onCompleted:function(){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save success]"),p()},onError:function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][save error]",{actionPayload:{error:a.description}}),y.current&&A(!1)}})},[w,u,H,D,y,p,q.id,r,I,F,s,t]);a=j.useCallback(function(){b("promiseDone")(o().then(function(a){return a&&K()}))},[o,K]);e=j.useCallback(function(a){v.current=a},[]);var L=j.useCallback(function(a){x(a)},[]);b("logCometFunnelEvent").useLogCometFunnelImpressionEvent("ProfileCometTimelineWebFunnelDefinition","[impression][profile picture edit dialog][edit thumbnail]");var M=b("useProfileEngagementImpression")({item_subtype:"crop_photo",item_type:"cropping_button",product_bucket:"profile_core",surface:"profile_photo"}),N=b("useProfileEngagementClickCallback")({item_subtype:"crop_photo",item_type:"cropping_button",product_bucket:"profile_core",surface:"profile_photo"},function(){return E(!D)}),O=j.jsx(b("ProfileCometProfilePictureZoomCrop.react"),{cropSize:[l,l],disabled:z,imageSize:[q.width,q.height],imageSrc:q.uri,onChange:e,xstyle:n}),P=null;I&&(O=j.jsx(b("ProfileCometProfilePictureZoomCrop.react"),{cropSize:[l,l],disabled:z,imageSize:[q.width,q.height],imageSrc:q.uri,onChange:e,showCropped:D,xstyle:n}),P=j.jsx("div",{ref:M,children:j.jsx(b("BaseRowItem.react"),{xstyle:k.cropPhotoButton,children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("482559"),16),label:h._("Crop Photo"),onPress:N,reduceEmphasis:D,ref:M,type:D?"primary":"secondary"})})}));n=(e=d)!=null?e:B?h._("Your group profile photo is visible to all members."):b("ProfileCometProfilePictureEditStrings").PRIVACY_DISCLAIMER;N=j.jsxs("div",{className:(i||(i=b("stylex")))(k.privacyDisclaimer),children:[c?j.jsx("div",{className:(i||(i=b("stylex")))(k.privacyIcon),children:j.jsx(b("TetraIcon.react"),{color:"secondary",icon:b("fbicon")._(g("560120"),20)})}):null,j.jsx("div",{className:i(k.privacyText),children:j.jsx(b("TetraText.react"),{color:"secondary",testid:void 0,type:"body2",children:n})})]});return j.jsxs("div",{children:[!q.isProfilePicture&&!B&&j.jsx("div",{className:(i||(i=b("stylex")))(k.description),children:j.jsx(b("CometFormTextArea.react"),{label:b("ProfileCometProfilePictureEditStrings").ADD_DESCRIPTION,minRows:2,onValueChange:L,value:w})}),O,(P!==null||f)&&!q.isProfilePicture&&j.jsxs(b("BaseRow.react"),{align:"center",xstyle:k.spacingBottom,children:[P,f&&!B&&j.jsx(b("BaseRowItem.react"),{children:j.jsx(b("TetraButton.react"),{icon:b("fbicon")._(g("478793"),16),label:b("ProfileCometProfilePictureEditStrings").MAKE_TEMPORARY,onPress:function(){return G(!F)},reduceEmphasis:F,type:F?"primary":"secondary"})})]}),F&&j.jsx(b("BaseRow.react"),{xstyle:k.spacingBottom,children:j.jsx(b("BaseRowItem.react"),{expanding:!0,children:j.jsx(b("CometCard.react"),{border:"solid",dropShadow:1,children:j.jsxs("div",{className:(i||(i=b("stylex")))(k.temporaryInput),children:[j.jsx(b("TetraText.react"),{type:"body3",children:b("ProfileCometProfilePictureEditStrings").TEMPORARY_PROFILE_PIC_CONTROL}),j.jsx(b("ProfileCometExpirationTimeSelector.react"),{disabled:z,onChange:C,value:H})]})})})}),b("gkx")("1224637")?null:N,j.jsxs("div",{className:i(k.footerWithDivider),children:[j.jsx("div",{className:i(k.cancelButton),children:z?j.jsx("div",{className:(i||(i=b("stylex")))(k.savingIndicator),children:j.jsx(b("CometProgressIndicator.react"),{})}):j.jsx(b("TetraButton.react"),{label:b("ProfileCometProfilePictureEditStrings").CANCEL,onPress:m,reduceEmphasis:!0,type:"secondary"})}),j.jsx("div",{className:i(k.saveButton),children:j.jsx(b("TetraButton.react"),{disabled:z,label:b("ProfileCometProfilePictureEditStrings").SAVE,onPress:a,padding:"wide",testid:void 0})})]})]})}},null);
__d("ProfileCometProfilePictureMediaPickerPhoto.react",["CometBackgroundImage.react","CometPressable.react","CometRelay","ProfileCometProfilePictureEditDialogContext","ProfileCometProfilePictureEditStrings","React","getRoundedCorners","stylex","ProfileCometProfilePictureMediaPickerPhoto_media.graphql"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h,i=b("React"),j=b("getRoundedCorners").CORNERS,k=b("getRoundedCorners").hasCorner,l={borderBottomEndRadius:{borderBottomEndRadius:"uo3d90p7"},borderBottomStartRadius:{borderBottomStartRadius:"l82x9zwi"},borderTopEndRadius:{borderTopEndRadius:"pw54ja7n"},borderTopStartRadius:{borderTopStartRadius:"ue3kfks5"},imageBorder:{bottom:"i09qtzwb",boxSizing:"rq0escxv",end:"n7fi1qx3",position:"pmk7jnqg",start:"j9ispegn",top:"kr520xx4",boxShadow:"oaz4zybt"},root:{height:"datstx6m",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7",width:"k4urcfbm"}};function a(a){var c=a.media,d=a.roundCorner,e=b("CometRelay").useFragment(g!==void 0?g:g=b("ProfileCometProfilePictureMediaPickerPhoto_media.graphql"),c);c=((a=e.thumbnail_image)==null?void 0:a.uri)||"";var f=e.id||"",m=((a=e.image)==null?void 0:a.height)||0,n=((a=e.image)==null?void 0:a.uri)||"",o=((a=e.image)==null?void 0:a.width)||0;a=(a=e==null?void 0:e.accessibility_caption)!=null?a:b("ProfileCometProfilePictureEditStrings").SELECT_PHOTO;var p=i.useContext(b("ProfileCometProfilePictureEditDialogContext")),q=p.dispatch;p=p.state;var r=i.useCallback(function(){return q({image:{height:m,id:f,isProfilePicture:e.is_profile_picture||!1,uri:n,width:o},type:"SELECT_PHOTO"})},[q,m,f,n,o,e.is_profile_picture]),s=[j.BOTTOM_END,j.BOTTOM_START,j.TOP_END,j.TOP_START].map(function(a){return k(d,a)}),t=s[0],u=s[1],v=s[2];s=s[3];return i.jsxs(b("CometPressable.react"),{disabled:p.isUploading,onPress:r,xstyle:[l.root,t&&l.borderBottomEndRadius,u&&l.borderBottomStartRadius,v&&l.borderTopEndRadius,s&&l.borderTopStartRadius],children:[i.jsx(b("CometBackgroundImage.react"),{alt:a,src:c}),i.jsx("div",{className:(h||(h=b("stylex")))(t&&l.borderBottomEndRadius,u&&l.borderBottomStartRadius,v&&l.borderTopEndRadius,s&&l.borderTopStartRadius,l.imageBorder)})]})}},null);
__d("XWWWPagesSuggestEditsPicUploadControllerRouteBuilder",["jsRouteBuilder"],function(a,b,c,d,e,f){a=b("jsRouteBuilder")("/pages/suggest/edits/picture/upload/",Object.freeze({photo_source:9}),void 0);c=a;e.exports=c},null);
__d("ProfileCometProfilePictureMediaUploadAction.react",["CometFileSelector.react","ProfileCometProfilePictureEditDialogContext","React","XProfilePicUploadAsyncController","XWWWPagesSuggestEditsPicUploadControllerRouteBuilder","logCometFunnelEvent","useCometAlertDialog","useProfileCometPhotoUploader"],function(a,b,c,d,e,f){"use strict";e.exports=a;var g=b("React");function a(a){var c=a.children,d=a.isSuggestEdits,e=d===void 0?!1:d,f=a.profileID;d=g.useContext(b("ProfileCometProfilePictureEditDialogContext"));var h=d.dispatch;a=b("useCometAlertDialog")();var i=a[0],j=b("useProfileCometPhotoUploader")(),k=g.useCallback(function(a){var c;b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload success]");h({image:{height:(c=a.imageHeight)!=null?c:0,id:a.fbid,isProfilePicture:!1,uri:(c=a.imageURI)!=null?c:"",width:(c=a.imageWidth)!=null?c:0},type:"UPLOAD_SUCCESS"})},[h]),l=g.useCallback(function(a){b("logCometFunnelEvent").logCometFunnelEvent("ProfileCometTimelineWebFunnelDefinition","[action][profile picture edit dialog][upload error]",{actionPayload:{error:a.description}}),h({type:"UPLOAD_FAILED"}),i({body:a.description,title:a.summary})},[h,i]);d=g.useCallback(function(a){if(!a.length)return;h({type:"UPLOAD_STARTED"});var c=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",f).setEnum("photo_source",57).getURI();e&&(c=b("XWWWPagesSuggestEditsPicUploadControllerRouteBuilder").buildURL({photo_source:57,profile_id:f}));j(c,a[0],{onFailed:l,onSucceeded:k})},[h,e,l,k,f,j]);return g.jsx(b("CometFileSelector.react"),{accept:["image/*","image/heif","image/heic"],onFilesSelected:d,children:function(a){return c(a)}})}},null);